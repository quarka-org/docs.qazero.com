"use strict";(self.webpackChunktemp=self.webpackChunktemp||[]).push([[8706],{2704:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>t,contentTitle:()=>d,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"developer-manual/api/2025-10-20/qal-2025-10-20","title":"QAL Guide","description":"Overview","source":"@site/docs/developer-manual/api/2025-10-20/qal.md","sourceDirName":"developer-manual/api/2025-10-20","slug":"/developer-manual/api/2025-10-20/qal-2025-10-20","permalink":"/docs/developer-manual/api/2025-10-20/qal-2025-10-20","draft":false,"unlisted":false,"editUrl":"https://github.com/quarka-org/docs.qazero.com/edit/main/docs/developer-manual/api/2025-10-20/qal.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"id":"qal-2025-10-20","title":"QAL Guide","sidebar_position":3,"last_updated":"2025-10-06T00:00:00.000Z"},"sidebar":"developerManualSidebar","previous":{"title":"API Endpoints","permalink":"/docs/developer-manual/api/2025-10-20/endpoints-2025-10-20"},"next":{"title":"Materials Reference","permalink":"/docs/developer-manual/api/2025-10-20/materials-2025-10-20"}}');var i=l(4848),r=l(8453);const a={id:"qal-2025-10-20",title:"QAL Guide",sidebar_position:3,last_updated:new Date("2025-10-06T00:00:00.000Z")},d="QAL Guide (2025-10-20)",t={},c=[{value:"Overview",id:"overview",level:2},{value:"What&#39;s Supported",id:"whats-supported",level:3},{value:"Document Structure",id:"document-structure",level:2},{value:"1. tracking_id (required)",id:"1-tracking_id-required",level:2},{value:"2. materials (required)",id:"2-materials-required",level:2},{value:"Format",id:"format",level:3},{value:"Available Materials",id:"available-materials",level:3},{value:"Rules",id:"rules",level:3},{value:"Examples",id:"examples",level:3},{value:"3. time (required)",id:"3-time-required",level:2},{value:"Format",id:"format-1",level:3},{value:"Fields",id:"fields",level:3},{value:"Time Format",id:"time-format",level:3},{value:"Timezones",id:"timezones",level:3},{value:"Time Range Interpretation",id:"time-range-interpretation",level:3},{value:"4. make (required)",id:"4-make-required",level:2},{value:"Format",id:"format-2",level:3},{value:"View Name",id:"view-name",level:3},{value:"from (required)",id:"from-required",level:3},{value:"keep (required)",id:"keep-required",level:3},{value:"Complete make Example",id:"complete-make-example",level:3},{value:"5. result (required)",id:"5-result-required",level:2},{value:"Format",id:"format-3",level:3},{value:"use (required)",id:"use-required",level:3},{value:"limit (optional)",id:"limit-optional",level:3},{value:"count_only (optional)",id:"count_only-optional",level:3},{value:"Complete Examples",id:"complete-examples",level:2},{value:"Example 1: Basic Page View Query",id:"example-1-basic-page-view-query",level:3},{value:"Example 2: Device and Browser Info",id:"example-2-device-and-browser-info",level:3},{value:"Example 3: Count Total Page Views",id:"example-3-count-total-page-views",level:3},{value:"Example 4: UTM Campaign Data",id:"example-4-utm-campaign-data",level:3},{value:"Example 5: GSC Keywords",id:"example-5-gsc-keywords",level:3},{value:"Example 6: New vs Returning Visitors",id:"example-6-new-vs-returning-visitors",level:3},{value:"Error Codes",id:"error-codes",level:2},{value:"Common Patterns",id:"common-patterns",level:2},{value:"Pattern 1: Check Data Volume First",id:"pattern-1-check-data-volume-first",level:3},{value:"Pattern 2: Incremental Limits",id:"pattern-2-incremental-limits",level:3},{value:"Pattern 3: All Available Columns",id:"pattern-3-all-available-columns",level:3},{value:"Tips &amp; Best Practices",id:"tips--best-practices",level:2},{value:"1. Start Simple",id:"1-start-simple",level:3},{value:"2. Use Descriptive View Names",id:"2-use-descriptive-view-names",level:3},{value:"3. Test with Small Limits",id:"3-test-with-small-limits",level:3},{value:"4. Check Column Names",id:"4-check-column-names",level:3},{value:"5. Use count_only for Planning",id:"5-use-count_only-for-planning",level:3},{value:"What&#39;s Coming in Future Versions",id:"whats-coming-in-future-versions",level:2},{value:"Comparison with Full QAL",id:"comparison-with-full-qal",level:2},{value:"Next Steps",id:"next-steps",level:2}];function o(e){const n={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"qal-guide-2025-10-20",children:"QAL Guide (2025-10-20)"})}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsxs)(n.p,{children:["This version of QAL (Query Abstraction Language) provides a ",(0,i.jsx)(n.strong,{children:"simplified subset"})," focused on basic data extraction. It's designed to be easy to learn and use while maintaining clarity and safety."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Version:"})," 2025-10-20"]}),"\n",(0,i.jsx)(n.h3,{id:"whats-supported",children:"What's Supported"}),"\n",(0,i.jsxs)(n.p,{children:["\u2705 ",(0,i.jsx)(n.strong,{children:"Basic extraction"})," - Select specific columns from materials",(0,i.jsx)(n.br,{}),"\n","\u2705 ",(0,i.jsx)(n.strong,{children:"Time filtering"})," - Filter by date/time range",(0,i.jsx)(n.br,{}),"\n","\u2705 ",(0,i.jsx)(n.strong,{children:"Simple results"})," - Return data or count"]}),"\n",(0,i.jsxs)(n.p,{children:["\u274c ",(0,i.jsx)(n.strong,{children:"Not yet available:"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Row filtering (",(0,i.jsx)(n.code,{children:"filter"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:["Joining materials (",(0,i.jsx)(n.code,{children:"join"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:["Aggregations (",(0,i.jsx)(n.code,{children:"calc"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:["Sorting (",(0,i.jsx)(n.code,{children:"sort"}),")"]}),"\n",(0,i.jsx)(n.li,{children:"Sampling"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"document-structure",children:"Document Structure"}),"\n",(0,i.jsx)(n.p,{children:"Every QAL query has four required sections:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "tracking_id": "abc123",\n  "materials": [ /* data sources */ ],\n  "time": { /* time range */ },\n  "make": { /* view definitions */ },\n  "result": { /* result specification */ }\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note:"})," Version is specified in the URL query parameter (",(0,i.jsx)(n.code,{children:"?version=2025-10-20"}),"), not in the QAL query body."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"1-tracking_id-required",children:"1. tracking_id (required)"}),"\n",(0,i.jsxs)(n.p,{children:["Specify which tracking site to query. Use the ",(0,i.jsx)(n.code,{children:"tracking_id"})," from the ",(0,i.jsx)(n.code,{children:"/guide"})," endpoint response."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "tracking_id": "abc123"\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Rules:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Must match a ",(0,i.jsx)(n.code,{children:"tracking_id"})," from ",(0,i.jsx)(n.code,{children:"/guide"})," response"]}),"\n",(0,i.jsx)(n.li,{children:"Determines which site's data to query"}),"\n",(0,i.jsx)(n.li,{children:"Each site may have different available materials"}),"\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.code,{children:"/guide"})," endpoint to discover available tracking IDs"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{"tracking_id": "abc123"}  // \u2705 Valid site ID\n{"tracking_id": "def456"}  // \u2705 Another site\n{"tracking_id": "invalid"} // \u274c Unknown site\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Finding Your tracking_id:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl -u "user:pass" \\\n  "https://your-site.com/wp-json/qa-platform/guide?version=2025-10-20"\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Look for ",(0,i.jsx)(n.code,{children:"sites[].tracking_id"})," in the response."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"2-materials-required",children:"2. materials (required)"}),"\n",(0,i.jsx)(n.p,{children:"List the materials (data sources) you want to use."}),"\n",(0,i.jsx)(n.h3,{id:"format",children:"Format"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "materials": [\n    { "name": "allpv" }\n  ]\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"available-materials",children:"Available Materials"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"allpv"})," - Page view data"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"gsc"})," - Google Search Console data"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"rules",children:"Rules"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Each material must have a ",(0,i.jsx)(n.code,{children:"name"})," property"]}),"\n",(0,i.jsx)(n.li,{children:"Name must be exact (case-sensitive)"}),"\n",(0,i.jsxs)(n.li,{children:["\u274c No ",(0,i.jsx)(n.code,{children:"as"})," (aliasing) allowed"]}),"\n",(0,i.jsx)(n.li,{children:"Can declare multiple materials (even if using only one)"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"examples",children:"Examples"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Single material:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "materials": [\n    { "name": "allpv" }\n  ]\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Multiple materials (for future use):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "materials": [\n    { "name": "allpv" },\n    { "name": "gsc" }\n  ]\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"3-time-required",children:"3. time (required)"}),"\n",(0,i.jsx)(n.p,{children:"Define the time range for your query."}),"\n",(0,i.jsx)(n.h3,{id:"format-1",children:"Format"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "time": {\n    "start": "2025-10-01T00:00:00",\n    "end": "2025-10-20T00:00:00",\n    "tz": "Asia/Tokyo"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"fields",children:"Fields"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Field"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Required"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"start"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsx)(n.td,{children:"Start time (ISO 8601)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"end"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsx)(n.td,{children:"End time (ISO 8601)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"tz"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsx)(n.td,{children:"IANA timezone"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"time-format",children:"Time Format"}),"\n",(0,i.jsx)(n.p,{children:"Use ISO 8601 local time format:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"YYYY-MM-DDTHH:mm:ss\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Examples:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"2025-10-01T00:00:00"})," - October 1, 2025 at midnight"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"2025-10-20T23:59:59"})," - October 20, 2025 at 11:59:59 PM"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"timezones",children:"Timezones"}),"\n",(0,i.jsx)(n.p,{children:"Common timezone values:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Asia/Tokyo"})," - Japan"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"America/New_York"})," - US Eastern"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"America/Los_Angeles"})," - US Pacific"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Europe/London"})," - UK"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"UTC"})," - Coordinated Universal Time"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Full list: ",(0,i.jsx)(n.a,{href:"https://www.iana.org/time-zones",children:"IANA Timezone Database"})]}),"\n",(0,i.jsx)(n.h3,{id:"time-range-interpretation",children:"Time Range Interpretation"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Inclusive start:"})," Data from ",(0,i.jsx)(n.code,{children:"start"})," time is included"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Exclusive end:"})," Data from ",(0,i.jsx)(n.code,{children:"end"})," time is excluded"]}),"\n",(0,i.jsxs)(n.li,{children:["Think of it as: ",(0,i.jsx)(n.code,{children:"[start, end)"})]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "start": "2025-10-01T00:00:00",\n  "end": "2025-10-02T00:00:00"\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"Returns all data from October 1st, but nothing from October 2nd."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"4-make-required",children:"4. make (required)"}),"\n",(0,i.jsx)(n.p,{children:"Define views to transform your data."}),"\n",(0,i.jsx)(n.h3,{id:"format-2",children:"Format"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "make": {\n    "view_name": {\n      "from": ["material_name"],\n      "keep": ["material.column1", "material.column2"]\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"view-name",children:"View Name"}),"\n",(0,i.jsxs)(n.p,{children:["The key in ",(0,i.jsx)(n.code,{children:"make"})," is your view name:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Can be any valid string"}),"\n",(0,i.jsxs)(n.li,{children:["Use descriptive names (e.g., ",(0,i.jsx)(n.code,{children:"recent_pvs"}),", ",(0,i.jsx)(n.code,{children:"mobile_data"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:["Will be referenced in ",(0,i.jsx)(n.code,{children:"result.use"})]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"from-required",children:"from (required)"}),"\n",(0,i.jsx)(n.p,{children:"Specify which material to use."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Format:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "from": ["allpv"]\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Rules:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Must be an array with ",(0,i.jsx)(n.strong,{children:"exactly one element"})]}),"\n",(0,i.jsxs)(n.li,{children:["Element must match a material declared in ",(0,i.jsx)(n.code,{children:"materials"})]}),"\n",(0,i.jsx)(n.li,{children:"In this version, can only reference materials (not other views)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Examples:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{"from": ["allpv"]}    // \u2705 Correct\n{"from": ["gsc"]}      // \u2705 Correct\n{"from": ["allpv", "gsc"]}  // \u274c Wrong - only one allowed\n{"from": "allpv"}      // \u274c Wrong - must be array\n'})}),"\n",(0,i.jsx)(n.h3,{id:"keep-required",children:"keep (required)"}),"\n",(0,i.jsx)(n.p,{children:"List the columns you want in your result."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Format:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "keep": [\n    "allpv.url",\n    "allpv.title",\n    "allpv.access_time"\n  ]\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Rules:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Must use ",(0,i.jsx)(n.strong,{children:"fully qualified names"}),": ",(0,i.jsx)(n.code,{children:"material.column"})]}),"\n",(0,i.jsx)(n.li,{children:"At least one column required"}),"\n",(0,i.jsxs)(n.li,{children:["Order in ",(0,i.jsx)(n.code,{children:"keep"})," determines column order in results"]}),"\n",(0,i.jsx)(n.li,{children:"Unknown columns will cause an error"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Examples:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'// \u2705 Correct\n{\n  "keep": [\n    "allpv.url",\n    "allpv.title"\n  ]\n}\n\n// \u274c Wrong - not qualified\n{\n  "keep": ["url", "title"]\n}\n\n// \u274c Wrong - wrong material name\n{\n  "keep": ["wrong.url"]\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"complete-make-example",children:"Complete make Example"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "make": {\n    "page_views": {\n      "from": ["allpv"],\n      "keep": [\n        "allpv.url",\n        "allpv.title",\n        "allpv.device_type",\n        "allpv.access_time"\n      ]\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"5-result-required",children:"5. result (required)"}),"\n",(0,i.jsx)(n.p,{children:"Specify which view to return and how."}),"\n",(0,i.jsx)(n.h3,{id:"format-3",children:"Format"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "result": {\n    "use": "view_name",\n    "limit": 100,\n    "count_only": false\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"use-required",children:"use (required)"}),"\n",(0,i.jsxs)(n.p,{children:["Name of the view (from ",(0,i.jsx)(n.code,{children:"make"}),") to return."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "use": "page_views"\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Rules:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Must match a view name defined in ",(0,i.jsx)(n.code,{children:"make"})]}),"\n",(0,i.jsx)(n.li,{children:"Only ONE view can be returned"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"limit-optional",children:"limit (optional)"}),"\n",(0,i.jsx)(n.p,{children:"Maximum number of rows to return."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "limit": 100\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Rules:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Default: ",(0,i.jsx)(n.code,{children:"100"})]}),"\n",(0,i.jsxs)(n.li,{children:["Maximum: ",(0,i.jsx)(n.code,{children:"5000"})]}),"\n",(0,i.jsx)(n.li,{children:"Values above 5000 will be capped at 5000"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Examples:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{"limit": 10}     // Return up to 10 rows\n{"limit": 1000}   // Return up to 1000 rows\n{"limit": 5000}   // Maximum allowed\n'})}),"\n",(0,i.jsx)(n.h3,{id:"count_only-optional",children:"count_only (optional)"}),"\n",(0,i.jsx)(n.p,{children:"Return only the count instead of data."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "count_only": true\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Rules:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Default: ",(0,i.jsx)(n.code,{children:"false"})]}),"\n",(0,i.jsxs)(n.li,{children:["When ",(0,i.jsx)(n.code,{children:"true"}),", returns only ",(0,i.jsx)(n.code,{children:"{count: N}"})]}),"\n",(0,i.jsxs)(n.li,{children:["When ",(0,i.jsx)(n.code,{children:"false"}),", returns full data array"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Examples:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'// Get data\n{\n  "use": "page_views",\n  "limit": 100,\n  "count_only": false\n}\n// Returns: {"data": [...], "meta": {...}}\n\n// Get count only\n{\n  "use": "page_views",\n  "count_only": true\n}\n// Returns: {"count": 12456}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"complete-examples",children:"Complete Examples"}),"\n",(0,i.jsx)(n.h3,{id:"example-1-basic-page-view-query",children:"Example 1: Basic Page View Query"}),"\n",(0,i.jsx)(n.p,{children:"Get the most recent 10 page views with URL and title:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "materials": [\n    { "name": "allpv" }\n  ],\n  "time": {\n    "start": "2025-10-01T00:00:00",\n    "end": "2025-10-20T00:00:00",\n    "tz": "Asia/Tokyo"\n  },\n  "make": {\n    "recent_views": {\n      "from": ["allpv"],\n      "keep": [\n        "allpv.url",\n        "allpv.title",\n        "allpv.access_time"\n      ]\n    }\n  },\n  "result": {\n    "use": "recent_views",\n    "limit": 10\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"example-2-device-and-browser-info",children:"Example 2: Device and Browser Info"}),"\n",(0,i.jsx)(n.p,{children:"Get device and browser information:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "materials": [\n    { "name": "allpv" }\n  ],\n  "time": {\n    "start": "2025-10-01T00:00:00",\n    "end": "2025-10-20T00:00:00",\n    "tz": "Asia/Tokyo"\n  },\n  "make": {\n    "device_info": {\n      "from": ["allpv"],\n      "keep": [\n        "allpv.url",\n        "allpv.device_type",\n        "allpv.os",\n        "allpv.browser"\n      ]\n    }\n  },\n  "result": {\n    "use": "device_info",\n    "limit": 100\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"example-3-count-total-page-views",children:"Example 3: Count Total Page Views"}),"\n",(0,i.jsx)(n.p,{children:"Get the count without retrieving data:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "materials": [\n    { "name": "allpv" }\n  ],\n  "time": {\n    "start": "2025-10-01T00:00:00",\n    "end": "2025-10-20T00:00:00",\n    "tz": "Asia/Tokyo"\n  },\n  "make": {\n    "all_pvs": {\n      "from": ["allpv"],\n      "keep": ["allpv.pv_id"]\n    }\n  },\n  "result": {\n    "use": "all_pvs",\n    "count_only": true\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "count": 15234\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"example-4-utm-campaign-data",children:"Example 4: UTM Campaign Data"}),"\n",(0,i.jsx)(n.p,{children:"Get UTM campaign information:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "materials": [\n    { "name": "allpv" }\n  ],\n  "time": {\n    "start": "2025-10-01T00:00:00",\n    "end": "2025-10-20T00:00:00",\n    "tz": "Asia/Tokyo"\n  },\n  "make": {\n    "campaign_data": {\n      "from": ["allpv"],\n      "keep": [\n        "allpv.url",\n        "allpv.utm_source",\n        "allpv.utm_medium",\n        "allpv.utm_campaign"\n      ]\n    }\n  },\n  "result": {\n    "use": "campaign_data",\n    "limit": 200\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"example-5-gsc-keywords",children:"Example 5: GSC Keywords"}),"\n",(0,i.jsx)(n.p,{children:"Get Google Search Console keywords:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "materials": [\n    { "name": "gsc" }\n  ],\n  "time": {\n    "start": "2025-10-01T00:00:00",\n    "end": "2025-10-20T00:00:00",\n    "tz": "Asia/Tokyo"\n  },\n  "make": {\n    "keywords": {\n      "from": ["gsc"],\n      "keep": [\n        "gsc.keyword",\n        "gsc.url",\n        "gsc.clicks_sum",\n        "gsc.impressions_sum",\n        "gsc.ctr",\n        "gsc.position_wavg"\n      ]\n    }\n  },\n  "result": {\n    "use": "keywords",\n    "limit": 100\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"example-6-new-vs-returning-visitors",children:"Example 6: New vs Returning Visitors"}),"\n",(0,i.jsx)(n.p,{children:"Get new user flag information:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "materials": [\n    { "name": "allpv" }\n  ],\n  "time": {\n    "start": "2025-10-01T00:00:00",\n    "end": "2025-10-20T00:00:00",\n    "tz": "Asia/Tokyo"\n  },\n  "make": {\n    "visitor_type": {\n      "from": ["allpv"],\n      "keep": [\n        "allpv.reader_id",\n        "allpv.is_newuser",\n        "allpv.access_time"\n      ]\n    }\n  },\n  "result": {\n    "use": "visitor_type",\n    "limit": 500\n  }\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"error-codes",children:"Error Codes"}),"\n",(0,i.jsx)(n.p,{children:"Common errors you might encounter:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Error Code"}),(0,i.jsx)(n.th,{children:"Cause"}),(0,i.jsx)(n.th,{children:"Solution"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"E_UNKNOWN_TRACKING_ID"})}),(0,i.jsx)(n.td,{children:"Invalid tracking_id"}),(0,i.jsx)(n.td,{children:"Use tracking_id from /guide endpoint"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"E_TIME_REQUIRED"})}),(0,i.jsx)(n.td,{children:"Missing time fields"}),(0,i.jsx)(n.td,{children:"Add start, end, and tz"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"E_UNKNOWN_MATERIAL"})}),(0,i.jsx)(n.td,{children:"Invalid material name"}),(0,i.jsx)(n.td,{children:'Use "allpv" or "gsc"'})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"E_UNKNOWN_COLUMN"})}),(0,i.jsx)(n.td,{children:"Invalid column name"}),(0,i.jsx)(n.td,{children:"Check materials reference"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"E_UNKNOWN_VIEW"})}),(0,i.jsx)(n.td,{children:"result.use references non-existent view"}),(0,i.jsx)(n.td,{children:"Match view name in make"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"E_FEATURE_NOT_SUPPORTED"})}),(0,i.jsx)(n.td,{children:"Used unsupported feature"}),(0,i.jsx)(n.td,{children:"Remove filter/join/calc"})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"common-patterns",children:"Common Patterns"}),"\n",(0,i.jsx)(n.h3,{id:"pattern-1-check-data-volume-first",children:"Pattern 1: Check Data Volume First"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'// Step 1: Count how many rows\n{\n  "result": {\n    "use": "my_view",\n    "count_only": true\n  }\n}\n\n// Step 2: If count is reasonable, get the data\n{\n  "result": {\n    "use": "my_view",\n    "limit": 1000\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"pattern-2-incremental-limits",children:"Pattern 2: Incremental Limits"}),"\n",(0,i.jsx)(n.p,{children:"Start small, then increase:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'// Test with 10\n{"limit": 10}\n\n// If okay, try 100\n{"limit": 100}\n\n// If okay, get more\n{"limit": 1000}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"pattern-3-all-available-columns",children:"Pattern 3: All Available Columns"}),"\n",(0,i.jsx)(n.p,{children:"To see all data available:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "keep": [\n    "allpv.pv_id",\n    "allpv.session_id",\n    "allpv.reader_id",\n    "allpv.page_id",\n    "allpv.url",\n    "allpv.title",\n    "allpv.device_type",\n    "allpv.os",\n    "allpv.browser",\n    "allpv.access_time",\n    "allpv.utm_source",\n    "allpv.utm_medium",\n    "allpv.utm_campaign"\n    // ... add more as needed\n  ]\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"tips--best-practices",children:"Tips & Best Practices"}),"\n",(0,i.jsx)(n.h3,{id:"1-start-simple",children:"1. Start Simple"}),"\n",(0,i.jsx)(n.p,{children:"Begin with a minimal query:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "keep": ["allpv.url"]\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"Then add more columns as needed."}),"\n",(0,i.jsx)(n.h3,{id:"2-use-descriptive-view-names",children:"2. Use Descriptive View Names"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'// \u2705 Good\n{"blog_posts": {...}}\n{"mobile_users": {...}}\n\n// \u274c Not helpful\n{"view1": {...}}\n{"data": {...}}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"3-test-with-small-limits",children:"3. Test with Small Limits"}),"\n",(0,i.jsxs)(n.p,{children:["Always test with ",(0,i.jsx)(n.code,{children:"limit: 10"})," first:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "result": {\n    "use": "my_view",\n    "limit": 10\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"4-check-column-names",children:"4. Check Column Names"}),"\n",(0,i.jsxs)(n.p,{children:["Use ",(0,i.jsx)(n.code,{children:"/materials"})," endpoint to verify column names before querying:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl -u "user:pass" \\\n  "https://your-site.com/wp-json/qa-platform/materials?version=2025-10-20"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"5-use-count_only-for-planning",children:"5. Use count_only for Planning"}),"\n",(0,i.jsx)(n.p,{children:"Before fetching large datasets:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "result": {\n    "use": "my_view",\n    "count_only": true\n  }\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"whats-coming-in-future-versions",children:"What's Coming in Future Versions"}),"\n",(0,i.jsx)(n.p,{children:"Planned features for future releases:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"filter"})," - Row-level filtering (e.g., only mobile devices)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"join"})," - Combine multiple materials"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"calc"})," - Aggregations (COUNT, SUM, AVERAGE, etc.)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"sort"})," - Sort results by column"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"CSV/Parquet export"})," - Alternative output formats"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"More materials"})," - Additional data sources"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"comparison-with-full-qal",children:"Comparison with Full QAL"}),"\n",(0,i.jsxs)(n.p,{children:["This version implements a ",(0,i.jsx)(n.strong,{children:"minimal subset"})," of QAL:"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Feature"}),(0,i.jsx)(n.th,{children:"2025-10-20"}),(0,i.jsx)(n.th,{children:"Future Versions"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"materials"}),(0,i.jsx)(n.td,{children:"\u2705 Supported"}),(0,i.jsx)(n.td,{children:"\u2705"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"time"}),(0,i.jsx)(n.td,{children:"\u2705 Supported"}),(0,i.jsx)(n.td,{children:"\u2705"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"make.from"}),(0,i.jsx)(n.td,{children:"\u2705 Supported"}),(0,i.jsx)(n.td,{children:"\u2705"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"make.keep"}),(0,i.jsx)(n.td,{children:"\u2705 Supported"}),(0,i.jsx)(n.td,{children:"\u2705"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"make.filter"}),(0,i.jsx)(n.td,{children:"\u274c Not yet"}),(0,i.jsx)(n.td,{children:"\u2705 Planned"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"make.join"}),(0,i.jsx)(n.td,{children:"\u274c Not yet"}),(0,i.jsx)(n.td,{children:"\u2705 Planned"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"make.calc"}),(0,i.jsx)(n.td,{children:"\u274c Not yet"}),(0,i.jsx)(n.td,{children:"\u2705 Planned"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"result.use"}),(0,i.jsx)(n.td,{children:"\u2705 Supported"}),(0,i.jsx)(n.td,{children:"\u2705"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"result.limit"}),(0,i.jsx)(n.td,{children:"\u2705 Supported"}),(0,i.jsx)(n.td,{children:"\u2705"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"result.count_only"}),(0,i.jsx)(n.td,{children:"\u2705 Supported"}),(0,i.jsx)(n.td,{children:"\u2705"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"result.sort"}),(0,i.jsx)(n.td,{children:"\u274c Not yet"}),(0,i.jsx)(n.td,{children:"\u2705 Planned"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"result.return (CSV)"}),(0,i.jsx)(n.td,{children:"\u274c Not yet"}),(0,i.jsx)(n.td,{children:"\u2705 Planned"})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"/docs/developer-manual/api/2025-10-20/materials-2025-10-20",children:"Materials Reference"})})," - See all available columns"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"/docs/developer-manual/api/2025-10-20/endpoints-2025-10-20",children:"Endpoints"})})," - API endpoint details"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"/docs/developer-manual/api/2025-10-20/",children:"Getting Started"})})," - Return to overview"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},8453:(e,n,l)=>{l.d(n,{R:()=>a,x:()=>d});var s=l(6540);const i={},r=s.createContext(i);function a(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);